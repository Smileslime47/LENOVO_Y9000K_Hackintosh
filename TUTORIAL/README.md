# 前言
本人的EFI仅供参考，由于缺少测试，有一些ACPI可能是冗余的，config的参数配置也无法保证绝对合理，有一些功能仍然缺少（如麦克风）  
这篇文章仅用于总结自己安装的历程并帮助一些人少踩一部分坑，在有能力的情况下请尽量自己根据情况配置efi  
具体的安装教程别人已经说的非常详尽，我并不打算详细说明如何安装hackintosh，仅仅是梳理知识结构并列出我在安装过程中遇到的一些坑，也许能帮助某些新人建立起一个方向，不至于一头雾水  
想要想尽教程请参考首页最前面的几个教程链接

# 正文
虽然很多教程都已经说过了，但还是要再提一下  

## 你需要的东西：  
* 一定的计算机基础&常识  
* 充足的时间和耐心（我从决定弄hackintosh到成功进入安装引导花了两天半，其中包括了等我的ssd的时间）  
* 基本的信息检索能力（善于运用github、google和远景等渠道寻找答案以及排错）  
* 强大的动手能力/行动力，以及做好足以承担任何后果的准备（在任何时刻把你的工具、efi备份留在u盘并且保证你的pc中总有一个系统是正常工作的）  
* 一台适配情况还可以的电脑
* 一个至少16GB的U盘
## 我的建议是：  
* 不要先想着一步到位，先用最小的代价（必备的acpi和kexts）成功安装并进入你的macos，减少需要控制的变量，成功进入系统然后再去弄剩下的驱动  
* 由于各个机型的不同，在没有完全相同型号且证实完美的efi的情况下（哪怕我的y9000k有y7000和9000x的先例），每个人都会遇到各种各样的问题，请做好在一个问题上投入很大时间精力，而且很多时候可能根本无解的准备  

OpenCore是我们会用到的引导工具，位于磁盘的ESP分区，bios设置的启动项实际上指的并非操作系统，而是对应的引导工具，在开机时bootloader先按照优先顺序（启动项）启动对应的引导工具，由引导工具启动对应的操作系统。  
ACPI提供了电源管理和硬件控制的接口，在启动操作系统时由引导提供给操作系统调用；Kexts是OpenCore的内核组件，用于安装一些必要的驱动（类似游戏中的MOD）
这些概念在其他教程里都说的很详细了，我就不详细展开了

## 安装hackintosh的过程可以总结为：
* 做好事前准备，修改你的bios设置，找到合适的macOS镜像，事先调查你的硬件的适配情况
* 通过磁盘管理工具（windows主要为DiskGenuis）为你的u盘创建ESP分区，并通过刻录软件（windows推荐balenaEthcher）将macOS的纯净版镜像刻录到u盘中  
* 下载官方版OpenCore->下载必要的ACPI（电源管理、端口等）->下载必要的Kexts（虚拟SMC芯片、Lilu依赖等）->根据你的电脑具体情况配置好config.plist(windows通过OCAT进行编辑)->将上级的EFI文件夹整个丢到ESP分区中->重启并设置U盘启动项->安装macOS->在macOS仍能正常工作的前提下完善你的ACPI和kexts（需要你经常重启试错）

可以看出整个过程主要围绕在构建并完善你的efi上，难度通常是**config.plist>ACPI>Kexts**（config.plist的许多参数需要根据电脑的实际情况去做很多修改，ACPI大部分情况下可以在下载后直接使用，但有些情况需要通过工具手动构建，甚至需要通过编译工具手动编译，kexts同理）  
如何完善你的EFI在极大程度上取决于你电脑硬件的实际情况，所以在有同型号机型的前人已经做配好了EFI的情况下可以极大程度上省去你折腾的麻烦，但是config仍然有许多参数需要你手动配置，除非型号完全相同，否则大部分情况下你通过任何途径下载到的config.plist都无法直接使用

在下载好你需要的EFI（不管是原生oc还是别人配好的），你都需要记住config的一个地方：  
**NVRAM->7C436110-AB2A-4BBB-A880-FE41995C9F82->boot-args**  
这个地方是你在OpenCore添加启动参数的位置，建议任何人在开始你的hackintosh之旅之前先在后方加一个-v开启啰嗦模式，否则你在安装macOS的过程中永远只是一个apple图标和一个进度条，所有的日志都会被隐藏，极其不利于排错，此外一些插件也会需要你在这里加入一些参数（如AppleALC需要你在这里设置声卡型号的lay-out ID）

在进入macOS后，你可以通过hackintool的硬盘处挂载你的ESP分区（通常以Untitled命名），并通过OCC（编辑体验优于OCAT）直接修改你的OpenCore，在重启后可以立马见效，不需要在windows和macOS之间反复切换

各种技术大牛的解决方案建议你在完全没有其他选择的情况下再采用，绝大多数因能力不足而无法通过调试解决的问题可以通过更换EFI、爬贴等方式解决，一般电脑往往都遇不到那种需要通过繁杂的技术手段才能解决的偏难怪问题。

# 本人实践时遇到的一些坑

待更新。。。